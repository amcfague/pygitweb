# -*- coding: utf-8 -*-
<%inherit file="/base.tmpl" />
<%def name="head_tags()">
    ${h.stylesheet_link("/css/highlight.css")}
    ${h.stylesheet_link("/css/graph.css")}
</%def>

<table border="0" cellspacing="4" cellpadding="4">
  <tbody>
    <tr>
      <td>author</td>
      <td>${c.commit.author_name} &lt;${h.mail_to(c.commit.author_email, encode="hex")}&gt; (${c.commit.author_time})</td>
    </tr>
    <tr>
      <td>committer</td>
      <td>${c.commit.committer_name} &lt;${h.mail_to(c.commit.committer_email, encode="hex")}&gt; (${c.commit.commit_time})</td>
    </tr>
    <tr>
      <td>commit</td>
      <td>${h.link_to(c.commit.id, h.url.current())}</td>
    </tr>
    <tr>
      <td>tree</td>
      <td>${h.link_to(c.commit.tree, h.url("tree", repo=c.repo, id=c.commit.tree))}</td>
    </tr>
%for parent in c.commit.parents:
    <tr>
      <td>parent</td>
      <td>${h.link_to(parent, h.url.current(id=parent))}</td>
    </tr>
%endfor
%for format in c.formats:
    <tr>
      <td>download</td>
      <td>${h.link_to("%s-%s.%s" % (c.repo, c.commit.id, format) ,
      			h.url("download", repo=c.repo, id=c.commit.id, format=format))}</td>
    </tr>
%endfor
  </tbody>
</table>
<br />
<br />
<p>
<strong>${c.commit.summary}</strong><br />
<pre>${h.trim_first_line(c.commit.message)}</pre>
<br />
${dir(c.diffs[0])}<br/>
<table>
  <tbody>
%for diff in c.diffs:
    <tr>
%  if diff.deleted:
      <td bgcolor="red">${diff.name_a}</td>
%  elif diff.new_file:
      <td bgcolor="green">${diff.name_b}</td>
%  elif diff.name_a != diff.name_b:
      <td>${diff.name_a} -> ${diff.name_b}</td>
%  endif
    </tr>
%endfor
  </tbody>
</table>
<br/>
<br/>
%for diff in c.diffs:
${diff.name_a}<br/>
%	if h.istext(diff.diff):
${h.highlight_diff("".join(diff.diff)) | n}<br/>
%	else:
<i>Binary file differs.</i><br/>
<br/>
%	endif
%endfor